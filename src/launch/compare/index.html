<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirect Based on Local Storage Variable</title>
    <script>
        // Function to perform the redirection
        function redirectToGeoCodeApp() {
            // Attempt to retrieve the geo-code variable from local storage
            var xLoGeoCode = localStorage.getItem('x-lo-geo-code');
            // Attempt to retrieve the access_token variable from local storage
            var accessToken = localStorage.getItem('access_token');
            
            // Check if the variable exists and has a value
            if (xLoGeoCode) {
               // Check if the variable exists and has a value
                if (accessToken) {
                    // Construct the Home page URL using the geo-code variable value
                    var redirectUrl = `https://poc-arch.platform.lmscloudlab.com/${xLoGeoCode}/app/compare`;
                    // Redirect the browser to the constructed URL
                    window.location.href = redirectUrl;
                }
                else{
                    // Construct the login page URL using the variable value
                    var redirectUrl = `https://poc-arch.platform.lmscloudlab.com/${xLoGeoCode}/login/compare`;
                    // Redirect the browser to the constructed URL
                    window.location.href = redirectUrl;
                }
                
                // Construct the URL using the variable value
                var redirectUrl = `https://poc-arch.platform.lmscloudlab.com/${xLoGeoCode}/app/compare`;
                // Redirect the browser to the constructed URL
                window.location.href = redirectUrl;
            } else {
                // Check if the variable exists and has a value
                if (accessToken) {
                    //Delete the access_token
                    localStorage.removeItem('access_token')
                }
                else{
                    // Construct the URL using the variable value
                    var redirectUrl = `https://poc-arch.platform.lmscloudlab.com/login/compare`;
                    // Redirect the browser to the constructed URL
                    window.location.href = redirectUrl;
                }
            }
        }

        // Run the redirect function once the page is loaded
        window.onload = redirectToGeoCodeApp;
    </script>
</head>
<body>
</body>
</html>
